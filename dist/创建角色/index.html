<head><script type="module">import{createPinia as e}from'https://testingcf.jsdelivr.net/npm/pinia/+esm';var a={441(e,a){a.A=(e,a)=>{const t=e.__vccOpts||e;for(const[e,l]of a)t[e]=l;return t}}},t={};const l=Vue,r={class:'creator-root'},n={key:0,class:'summary-view'},c={class:'summary-grid'},d={class:'summary-label'},s={class:'summary-value'},o={class:'form-view'},i={class:'form-body'},m={class:'form-row'},u={class:'field'},p=['disabled'],f={class:'field field--sm'},v=['disabled'],b={class:'form-row'},V={class:'field field--sm'},N={class:'gender-group'},E=['disabled','onClick'],g={class:'field'},h=['disabled'],k={class:'field field--full'},y=['disabled'],x={class:'field field--full'},w=['disabled'],B={class:'field field--full'},C=['disabled'],D={class:'form-footer'},T=['disabled'],M={key:0,class:'btn-inner'},U={key:1,class:'btn-inner'},A='starter_character_created',S=(0,l.defineComponent)({__name:'App',setup(e){const a=[{label:'男',value:'男'},{label:'女',value:'女'},{label:'随机',value:''}],t=(0,l.ref)({name:'',gender:'',race:'',age:'',appearance:'',traits:'',background:''}),S=(0,l.ref)(!1),F=(0,l.ref)(!1);(0,l.onMounted)(()=>{const e=getVariables({type:'chat'});if(_.get(e,A)){const a=_.get(e,'starter_character_form');a&&(t.value=a),F.value=!0}});const j=(0,l.computed)(()=>{const e=t.value,a={};return e.name&&(a['姓名']=e.name),e.gender&&(a['性别']=e.gender),e.race&&(a['种族']=e.race),e.age&&(a['年龄']=e.age),e.appearance&&(a['外貌']=e.appearance),e.traits&&(a['特质']=e.traits),e.background&&(a['背景故事']=e.background),a});async function I(){S.value=!0;try{const e=[],a=t.value;e.push('【角色创建】'),e.push(a.name?`姓名：${a.name}`:'姓名：（请随机生成）'),e.push(a.gender?`性别：${a.gender}`:'性别：（请随机生成）'),e.push(a.race?`种族：${a.race}`:'种族：（请随机生成）'),e.push(a.age?`年龄：${a.age}`:'年龄：（请随机生成）'),e.push(a.appearance?`外貌：${a.appearance}`:'外貌：（请随机生成）'),e.push(a.traits?`特质：${a.traits}`:'特质：（请随机生成）'),a.background&&e.push(`背景故事：${a.background}`),e.push(''),e.push('请根据以上信息补全所有「请随机生成」的字段，并以此角色身份开始冒险。');const l=e.join('\n');replaceVariables({[A]:!0,starter_character_form:t.value},{type:'chat'}),await generate({user_input:l}),F.value=!0}catch(e){console.error('[创建角色] 生成失败',e)}finally{S.value=!1}}return(e,A)=>((0,l.openBlock)(),(0,l.createElementBlock)('div',r,[(0,l.createCommentVNode)(' 已提交状态：显示角色摘要 '),(0,l.unref)(F)?((0,l.openBlock)(),(0,l.createElementBlock)('div',n,[A[6]||(A[6]=(0,l.createElementVNode)('div',{class:'summary-header'},[(0,l.createElementVNode)('span',{class:'glitch-icon'},'◈'),(0,l.createElementVNode)('h2',null,'角色已创建'),(0,l.createElementVNode)('span',{class:'glitch-icon'},'◈')],-1)),(0,l.createElementVNode)('div',c,[((0,l.openBlock)(!0),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)((0,l.unref)(j),(e,a)=>((0,l.openBlock)(),(0,l.createElementBlock)('div',{key:a,class:'summary-item'},[(0,l.createElementVNode)('span',d,(0,l.toDisplayString)(a),1),(0,l.createElementVNode)('span',s,(0,l.toDisplayString)(e),1)]))),128))]),A[7]||(A[7]=(0,l.createElementVNode)('p',{class:'summary-hint'},'冒险已开始，请继续对话…',-1))])):((0,l.openBlock)(),(0,l.createElementBlock)(l.Fragment,{key:1},[(0,l.createCommentVNode)(' 表单状态 '),(0,l.createElementVNode)('div',o,[A[16]||(A[16]=(0,l.createStaticVNode)('<div class="form-header" data-v-62b074e0><div class="header-deco" data-v-62b074e0>▸ ▸ ▸</div><h1 class="title" data-v-62b074e0>创建角色</h1><p class="subtitle" data-v-62b074e0>填写你的角色信息，留空部分将由 AI 随机补全</p><div class="header-deco" data-v-62b074e0>◂ ◂ ◂</div></div>',1)),(0,l.createElementVNode)('div',i,[(0,l.createCommentVNode)(' 第一行：姓名 + 年龄 '),(0,l.createElementVNode)('div',m,[(0,l.createElementVNode)('div',u,[A[8]||(A[8]=(0,l.createElementVNode)('label',{class:'field-label'},'姓名',-1)),(0,l.withDirectives)((0,l.createElementVNode)('input',{'onUpdate:modelValue':A[0]||(A[0]=e=>(0,l.unref)(t).name=e),class:'field-input',type:'text',placeholder:'留空随机生成',disabled:(0,l.unref)(S)},null,8,p),[[l.vModelText,(0,l.unref)(t).name]])]),(0,l.createElementVNode)('div',f,[A[9]||(A[9]=(0,l.createElementVNode)('label',{class:'field-label'},'年龄',-1)),(0,l.withDirectives)((0,l.createElementVNode)('input',{'onUpdate:modelValue':A[1]||(A[1]=e=>(0,l.unref)(t).age=e),class:'field-input',type:'text',placeholder:'随机',disabled:(0,l.unref)(S)},null,8,v),[[l.vModelText,(0,l.unref)(t).age]])])]),(0,l.createCommentVNode)(' 第二行：性别 + 种族 '),(0,l.createElementVNode)('div',b,[(0,l.createElementVNode)('div',V,[A[10]||(A[10]=(0,l.createElementVNode)('label',{class:'field-label'},'性别',-1)),(0,l.createElementVNode)('div',N,[((0,l.openBlock)(),(0,l.createElementBlock)(l.Fragment,null,(0,l.renderList)(a,e=>(0,l.createElementVNode)('button',{key:e.value,class:(0,l.normalizeClass)(['gender-btn',{'gender-btn--active':(0,l.unref)(t).gender===e.value}]),disabled:(0,l.unref)(S),onClick:a=>(0,l.unref)(t).gender=e.value},(0,l.toDisplayString)(e.label),11,E)),64))])]),(0,l.createElementVNode)('div',g,[A[11]||(A[11]=(0,l.createElementVNode)('label',{class:'field-label'},'种族',-1)),(0,l.withDirectives)((0,l.createElementVNode)('input',{'onUpdate:modelValue':A[2]||(A[2]=e=>(0,l.unref)(t).race=e),class:'field-input',type:'text',placeholder:'人类、精灵、兽人… 留空随机',disabled:(0,l.unref)(S)},null,8,h),[[l.vModelText,(0,l.unref)(t).race]])])]),(0,l.createCommentVNode)(' 外貌 '),(0,l.createElementVNode)('div',k,[A[12]||(A[12]=(0,l.createElementVNode)('label',{class:'field-label'},'外貌',-1)),(0,l.withDirectives)((0,l.createElementVNode)('textarea',{'onUpdate:modelValue':A[3]||(A[3]=e=>(0,l.unref)(t).appearance=e),class:'field-textarea',rows:'3',placeholder:'描述角色的外貌特征，留空随机生成',disabled:(0,l.unref)(S)},null,8,y),[[l.vModelText,(0,l.unref)(t).appearance]])]),(0,l.createCommentVNode)(' 特质 '),(0,l.createElementVNode)('div',x,[A[13]||(A[13]=(0,l.createElementVNode)('label',{class:'field-label'},'特质',-1)),(0,l.withDirectives)((0,l.createElementVNode)('textarea',{'onUpdate:modelValue':A[4]||(A[4]=e=>(0,l.unref)(t).traits=e),class:'field-textarea',rows:'3',placeholder:'性格、能力、习惯等特点，留空随机生成',disabled:(0,l.unref)(S)},null,8,w),[[l.vModelText,(0,l.unref)(t).traits]])]),(0,l.createCommentVNode)(' 背景故事 '),(0,l.createElementVNode)('div',B,[A[14]||(A[14]=(0,l.createElementVNode)('label',{class:'field-label'},[(0,l.createTextVNode)('背景故事 '),(0,l.createElementVNode)('span',{class:'field-label--extra'},'（额外设定补充）')],-1)),(0,l.withDirectives)((0,l.createElementVNode)('textarea',{'onUpdate:modelValue':A[5]||(A[5]=e=>(0,l.unref)(t).background=e),class:'field-textarea',rows:'4',placeholder:'角色的来历、经历或额外设定，留空随机生成',disabled:(0,l.unref)(S)},null,8,C),[[l.vModelText,(0,l.unref)(t).background]])])]),(0,l.createCommentVNode)(' 提交按钮 '),(0,l.createElementVNode)('div',D,[(0,l.createElementVNode)('button',{class:'submit-btn',disabled:(0,l.unref)(S),onClick:I},[(0,l.unref)(S)?((0,l.openBlock)(),(0,l.createElementBlock)('span',M,[...A[15]||(A[15]=[(0,l.createElementVNode)('span',{class:'spinner'},'⬡',-1),(0,l.createTextVNode)(' 生成中… ',-1)])])):((0,l.openBlock)(),(0,l.createElementBlock)('span',U,' ▶ 开始冒险 '))],8,T)])])],2112))]))}});var F=function e(l){var r=t[l];if(void 0!==r)return r.exports;var n=t[l]={exports:{}};return a[l](n,n.exports,e),n.exports}(441);const j=(0,F.A)(S,[['__scopeId','data-v-62b074e0']]);$(()=>{const a=(0,l.createApp)(j).use(e());a.mount('#app'),$(window).on('pagehide',()=>a.unmount())});
//# sourceMappingURL=index.js.map</script><style>.creator-root[data-v-62b074e0]{--green:#00ff41;--green-dim:#00cc33;--green-glow:rgba(0,255,65,0.35);--bg:#000000;--bg-panel:#080808;--bg-field:#0a0a0a;--border:rgba(0,255,65,0.4);--border-hover:rgba(0,255,65,0.8);--font:'Microsoft YaHei','微软雅黑',sans-serif;--radius:4px;width:100%;background:var(--bg);color:var(--green);font-family:var(--font);font-size:13px;line-height:1.6;padding:16px;box-sizing:border-box}.summary-view[data-v-62b074e0]{display:flex;flex-direction:column;align-items:center;gap:12px}.summary-header[data-v-62b074e0]{display:flex;align-items:center;gap:10px}.summary-header h2[data-v-62b074e0]{font-family:var(--font);font-weight:700;font-size:16px;color:var(--green);margin:0;text-shadow:0 0 8px var(--green-glow)}.summary-header .glitch-icon[data-v-62b074e0]{color:var(--green-dim);font-size:14px}.summary-grid[data-v-62b074e0]{width:100%;display:flex;flex-direction:column;gap:6px;border:1px solid var(--border);border-radius:var(--radius);padding:10px 12px;background:var(--bg-panel)}.summary-item[data-v-62b074e0]{display:flex;gap:12px;font-size:12px}.summary-item .summary-label[data-v-62b074e0]{font-weight:700;color:var(--green);min-width:56px;flex-shrink:0}.summary-item .summary-value[data-v-62b074e0]{color:rgba(0,255,65,.75);word-break:break-word}.summary-hint[data-v-62b074e0]{font-size:11px;color:rgba(0,255,65,.45);margin:0;letter-spacing:.04em}.form-view[data-v-62b074e0]{display:flex;flex-direction:column;gap:14px}.form-header[data-v-62b074e0]{text-align:center;display:flex;flex-direction:column;align-items:center;gap:4px}.form-header .header-deco[data-v-62b074e0]{font-size:10px;color:var(--green-dim);letter-spacing:6px;opacity:.6}.title[data-v-62b074e0]{font-family:var(--font);font-weight:700;font-size:20px;color:var(--green);margin:4px 0;text-shadow:0 0 12px var(--green-glow),0 0 24px rgba(0,255,65,.15);letter-spacing:.12em}.subtitle[data-v-62b074e0]{font-size:11px;color:rgba(0,255,65,.5);margin:0;letter-spacing:.04em}.form-body[data-v-62b074e0]{display:flex;flex-direction:column;gap:10px}.form-row[data-v-62b074e0]{display:flex;gap:10px}.field[data-v-62b074e0]{display:flex;flex-direction:column;gap:4px;flex:1}.field--sm[data-v-62b074e0]{flex:0 0 110px}.field--full[data-v-62b074e0]{width:100%}.field-label[data-v-62b074e0]{font-family:var(--font);font-weight:700;font-size:11px;color:var(--green);text-transform:uppercase;letter-spacing:.08em}.field-label--extra[data-v-62b074e0]{font-weight:400;font-size:10px;color:rgba(0,255,65,.45);text-transform:none;letter-spacing:0}.field-textarea[data-v-62b074e0],.field-input[data-v-62b074e0]{width:100%;background:var(--bg-field);border:1px solid var(--border);border-radius:var(--radius);color:#cfc;font-family:"Consolas","Courier New",monospace;font-size:12px;padding:6px 8px;box-sizing:border-box;outline:none;transition:border-color .15s,box-shadow .15s;resize:none}.field-textarea[data-v-62b074e0]::placeholder,.field-input[data-v-62b074e0]::placeholder{color:rgba(0,255,65,.2)}.field-textarea[data-v-62b074e0]:focus,.field-input[data-v-62b074e0]:focus{border-color:var(--border-hover);box-shadow:0 0 6px var(--green-glow)}.field-textarea[data-v-62b074e0]:disabled,.field-input[data-v-62b074e0]:disabled{opacity:.45;cursor:not-allowed}.field-textarea[data-v-62b074e0]{line-height:1.5}.gender-group[data-v-62b074e0]{display:flex;gap:5px}.gender-btn[data-v-62b074e0]{flex:1;padding:5px 4px;background:rgba(0,0,0,0);border:1px solid var(--border);border-radius:var(--radius);color:rgba(0,255,65,.55);font-family:var(--font);font-weight:700;font-size:11px;cursor:pointer;transition:all .15s}.gender-btn[data-v-62b074e0]:hover:not(:disabled){border-color:var(--green);color:var(--green);background:rgba(0,255,65,.07)}.gender-btn--active[data-v-62b074e0]{border-color:var(--green) !important;background:rgba(0,255,65,.15) !important;color:var(--green) !important;box-shadow:0 0 6px var(--green-glow)}.gender-btn[data-v-62b074e0]:disabled{opacity:.4;cursor:not-allowed}.form-footer[data-v-62b074e0]{display:flex;justify-content:center;padding-top:4px}.submit-btn[data-v-62b074e0]{display:inline-flex;align-items:center;justify-content:center;min-width:160px;padding:10px 28px;background:var(--green);border:none;border-radius:var(--radius);color:#000;font-family:var(--font);font-weight:700;font-size:14px;letter-spacing:.1em;cursor:pointer;transition:all .2s;box-shadow:0 0 14px var(--green-glow)}.submit-btn[data-v-62b074e0]:hover:not(:disabled){background:#3f6;box-shadow:0 0 22px rgba(0,255,65,.6);transform:translateY(-1px)}.submit-btn[data-v-62b074e0]:active:not(:disabled){transform:translateY(0)}.submit-btn[data-v-62b074e0]:disabled{opacity:.55;cursor:not-allowed;box-shadow:none}.btn-inner[data-v-62b074e0]{display:flex;align-items:center;gap:6px}.spinner[data-v-62b074e0]{display:inline-block;animation:spin-62b074e0 1s linear infinite}@keyframes spin-62b074e0{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}

/*# sourceMappingURL=main.css.map*/</style></head><body><div id="app"></div></body>