{"version":3,"file":"index.js","mappings":"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","sources":["src://tavern_helper_template/node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_71d7740e7607e74f4d732110d38a3681/node_modules/vue-loader/dist/exportHelper.js","src://tavern_helper_template/webpack/bootstrap","src://tavern_helper_template/external var \"Vue\"","webpack://tavern_helper_template/./src/创建角色/App.vue?eec5","webpack://tavern_helper_template/src/创建角色/App.vue?811b","src://tavern_helper_template/src/创建角色/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// runtime helper for setting properties on components\n// in a tree-shakable way\nexports.default = (sfc, props) => {\n    const target = sfc.__vccOpts || sfc;\n    for (const [key, val] of props) {\n        target[key] = val;\n    }\n    return target;\n};\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","const __WEBPACK_NAMESPACE_OBJECT__ = Vue;","import { defineComponent as _defineComponent } from 'vue';\nimport { createCommentVNode as _createCommentVNode, unref as _unref, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, normalizeClass as _normalizeClass, createTextVNode as _createTextVNode, isRef as _isRef, vModelSelect as _vModelSelect, createStaticVNode as _createStaticVNode } from \"vue\";\n\nimport { ref, onMounted, computed } from 'vue';\nconst _hoisted_1 = { class: \"creator-root\" };\nconst _hoisted_2 = {\n    key: 0,\n    class: \"summary-view\"\n};\nconst _hoisted_3 = { class: \"summary-grid\" };\nconst _hoisted_4 = { class: \"summary-label\" };\nconst _hoisted_5 = { class: \"summary-value\" };\nconst _hoisted_6 = { class: \"form-view\" };\nconst _hoisted_7 = { class: \"form-body\" };\nconst _hoisted_8 = { class: \"form-row\" };\nconst _hoisted_9 = { class: \"field\" };\nconst _hoisted_10 = [\"disabled\"];\nconst _hoisted_11 = { class: \"field field--sm\" };\nconst _hoisted_12 = [\"disabled\"];\nconst _hoisted_13 = { class: \"form-row\" };\nconst _hoisted_14 = { class: \"field field--sm\" };\nconst _hoisted_15 = { class: \"gender-group\" };\nconst _hoisted_16 = [\"disabled\", \"onClick\"];\nconst _hoisted_17 = { class: \"field\" };\nconst _hoisted_18 = [\"disabled\"];\nconst _hoisted_19 = { class: \"field field--full\" };\nconst _hoisted_20 = [\"disabled\"];\nconst _hoisted_21 = { class: \"field field--full\" };\nconst _hoisted_22 = [\"disabled\"];\nconst _hoisted_23 = { class: \"field field--full\" };\nconst _hoisted_24 = [\"disabled\"];\nconst _hoisted_25 = { class: \"preset-section\" };\nconst _hoisted_26 = { class: \"preset-row\" };\nconst _hoisted_27 = [\"disabled\"];\nconst _hoisted_28 = [\"value\"];\nconst _hoisted_29 = [\"disabled\"];\nconst _hoisted_30 = [\"disabled\"];\nconst _hoisted_31 = { class: \"preset-row\" };\nconst _hoisted_32 = [\"disabled\"];\nconst _hoisted_33 = [\"disabled\"];\nconst _hoisted_34 = { class: \"form-footer\" };\nconst _hoisted_35 = [\"disabled\"];\nconst _hoisted_36 = {\n    key: 0,\n    class: \"btn-inner\"\n};\nconst _hoisted_37 = {\n    key: 1,\n    class: \"btn-inner\"\n};\nconst CHAT_VAR_KEY = 'starter_character_created';\nconst PRESETS_STORAGE_KEY = 'tavern_character_presets';\nexport default /*@__PURE__*/ _defineComponent({\n    __name: 'App',\n    setup(__props) {\n        // ── 常量 ──────────────────────────────────────────────────────────────────\n        const genderOptions = [\n            { label: '男', value: '男' },\n            { label: '女', value: '女' },\n            { label: '扶她', value: '扶她' },\n            { label: '男娘', value: '男娘' },\n        ];\n        // ── 状态 ──────────────────────────────────────────────────────────────────\n        const form = ref({\n            name: '',\n            gender: '',\n            race: '',\n            age: '',\n            appearance: '',\n            traits: '',\n            background: '',\n        });\n        const isSubmitting = ref(false);\n        const submitted = ref(false);\n        // ── 人设预设状态 ───────────────────────────────────────────────────────────\n        const presets = ref([]);\n        const selectedPresetName = ref('');\n        const savePresetName = ref('');\n        // ── 初始化：检查是否已创建过 ────────────────────────────────────────────\n        onMounted(() => {\n            const vars = getVariables({ type: 'chat' });\n            if (_.get(vars, CHAT_VAR_KEY)) {\n                const saved = _.get(vars, 'starter_character_form');\n                if (saved)\n                    form.value = saved;\n                submitted.value = true;\n            }\n            // 加载本地存储的人设预设\n            try {\n                const raw = localStorage.getItem(PRESETS_STORAGE_KEY);\n                presets.value = raw ? JSON.parse(raw) : [];\n            }\n            catch {\n                presets.value = [];\n            }\n        });\n        // ── 人设预设操作 ───────────────────────────────────────────────────────────\n        function savePreset() {\n            const name = savePresetName.value.trim();\n            if (!name)\n                return;\n            const idx = presets.value.findIndex(p => p.name === name);\n            const entry = { name, form: { ...form.value } };\n            if (idx >= 0)\n                presets.value[idx] = entry;\n            else\n                presets.value.push(entry);\n            localStorage.setItem(PRESETS_STORAGE_KEY, JSON.stringify(presets.value));\n            selectedPresetName.value = name;\n            savePresetName.value = '';\n        }\n        function loadPreset() {\n            const preset = presets.value.find(p => p.name === selectedPresetName.value);\n            if (preset)\n                form.value = { ...preset.form };\n        }\n        function deletePreset() {\n            presets.value = presets.value.filter(p => p.name !== selectedPresetName.value);\n            localStorage.setItem(PRESETS_STORAGE_KEY, JSON.stringify(presets.value));\n            selectedPresetName.value = '';\n        }\n        // ── 摘要显示字段（仅非空） ───────────────────────────────────────────────\n        const summaryFields = computed(() => {\n            const f = form.value;\n            const map = {};\n            if (f.name)\n                map['姓名'] = f.name;\n            if (f.gender)\n                map['性别'] = f.gender;\n            if (f.race)\n                map['种族'] = f.race;\n            if (f.age)\n                map['年龄'] = f.age;\n            if (f.appearance)\n                map['外貌'] = f.appearance;\n            if (f.traits)\n                map['特质'] = f.traits;\n            if (f.background)\n                map['背景故事'] = f.background;\n            return map;\n        });\n        // ── 提交逻辑 ─────────────────────────────────────────────────────────────\n        async function handleSubmit() {\n            isSubmitting.value = true;\n            try {\n                // 构建角色描述文本\n                const lines = [];\n                const f = form.value;\n                lines.push('【角色创建】');\n                lines.push(f.name ? `姓名：${f.name}` : '姓名：（请随机生成）');\n                lines.push(f.gender ? `性别：${f.gender}` : '性别：（请随机生成）');\n                lines.push(f.race ? `种族：${f.race}` : '种族：（请随机生成）');\n                lines.push(f.age ? `年龄：${f.age}` : '年龄：（请随机生成）');\n                lines.push(f.appearance ? `外貌：${f.appearance}` : '外貌：（请随机生成）');\n                lines.push(f.traits ? `特质：${f.traits}` : '特质：（请随机生成）');\n                if (f.background)\n                    lines.push(`背景故事：${f.background}`);\n                lines.push('');\n                lines.push('请根据以上信息补全所有「请随机生成」的字段，并以此角色身份开始冒险。');\n                const user_input = lines.join('\\n');\n                // 持久化状态（先存，防止 generate 中途跳转）\n                replaceVariables({ [CHAT_VAR_KEY]: true, starter_character_form: form.value }, { type: 'chat' });\n                // 请求 AI 生成开场\n                await generate({ user_input });\n                submitted.value = true;\n            }\n            catch (err) {\n                console.error('[创建角色] 生成失败', err);\n            }\n            finally {\n                isSubmitting.value = false;\n            }\n        }\n        return (_ctx, _cache) => {\n            return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n                _createCommentVNode(\" 已提交状态：显示角色摘要 \"),\n                (_unref(submitted))\n                    ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n                        _cache[8] || (_cache[8] = _createElementVNode(\"div\", { class: \"summary-header\" }, [\n                            _createElementVNode(\"span\", { class: \"glitch-icon\" }, \"◈\"),\n                            _createElementVNode(\"h2\", null, \"角色已创建\"),\n                            _createElementVNode(\"span\", { class: \"glitch-icon\" }, \"◈\")\n                        ], -1 /* CACHED */)),\n                        _createElementVNode(\"div\", _hoisted_3, [\n                            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(summaryFields), (value, key) => {\n                                return (_openBlock(), _createElementBlock(\"div\", {\n                                    key: key,\n                                    class: \"summary-item\"\n                                }, [\n                                    _createElementVNode(\"span\", _hoisted_4, _toDisplayString(key), 1 /* TEXT */),\n                                    _createElementVNode(\"span\", _hoisted_5, _toDisplayString(value), 1 /* TEXT */)\n                                ]));\n                            }), 128 /* KEYED_FRAGMENT */))\n                        ]),\n                        _cache[9] || (_cache[9] = _createElementVNode(\"p\", { class: \"summary-hint\" }, \"冒险已开始，请继续对话…\", -1 /* CACHED */))\n                    ]))\n                    : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n                        _createCommentVNode(\" 表单状态 \"),\n                        _createElementVNode(\"div\", _hoisted_6, [\n                            _cache[19] || (_cache[19] = _createStaticVNode(\"<div class=\\\"form-header\\\" data-v-3abecd67><div class=\\\"header-deco\\\" data-v-3abecd67>▸ ▸ ▸</div><h1 class=\\\"title\\\" data-v-3abecd67>创建角色</h1><p class=\\\"subtitle\\\" data-v-3abecd67>填写你的角色信息，留空部分将由 AI 随机补全</p><div class=\\\"header-deco\\\" data-v-3abecd67>◂ ◂ ◂</div></div>\", 1)),\n                            _createElementVNode(\"div\", _hoisted_7, [\n                                _createCommentVNode(\" 第一行：姓名 + 年龄 \"),\n                                _createElementVNode(\"div\", _hoisted_8, [\n                                    _createElementVNode(\"div\", _hoisted_9, [\n                                        _cache[10] || (_cache[10] = _createElementVNode(\"label\", { class: \"field-label\" }, \"姓名\", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event) => ((_unref(form).name) = $event)),\n                                            class: \"field-input\",\n                                            type: \"text\",\n                                            placeholder: \"留空随机生成\",\n                                            disabled: _unref(isSubmitting)\n                                        }, null, 8 /* PROPS */, _hoisted_10), [\n                                            [_vModelText, _unref(form).name]\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_11, [\n                                        _cache[11] || (_cache[11] = _createElementVNode(\"label\", { class: \"field-label\" }, \"年龄\", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event) => ((_unref(form).age) = $event)),\n                                            class: \"field-input\",\n                                            type: \"text\",\n                                            placeholder: \"随机\",\n                                            disabled: _unref(isSubmitting)\n                                        }, null, 8 /* PROPS */, _hoisted_12), [\n                                            [_vModelText, _unref(form).age]\n                                        ])\n                                    ])\n                                ]),\n                                _createCommentVNode(\" 第二行：性别 + 种族 \"),\n                                _createElementVNode(\"div\", _hoisted_13, [\n                                    _createElementVNode(\"div\", _hoisted_14, [\n                                        _cache[12] || (_cache[12] = _createElementVNode(\"label\", { class: \"field-label\" }, \"性别\", -1 /* CACHED */)),\n                                        _createElementVNode(\"div\", _hoisted_15, [\n                                            (_openBlock(), _createElementBlock(_Fragment, null, _renderList(genderOptions, (g) => {\n                                                return _createElementVNode(\"button\", {\n                                                    key: g.value,\n                                                    class: _normalizeClass([\"gender-btn\", { 'gender-btn--active': _unref(form).gender === g.value }]),\n                                                    disabled: _unref(isSubmitting),\n                                                    onClick: ($event) => (_unref(form).gender = g.value)\n                                                }, _toDisplayString(g.label), 11 /* TEXT, CLASS, PROPS */, _hoisted_16);\n                                            }), 64 /* STABLE_FRAGMENT */))\n                                        ])\n                                    ]),\n                                    _createElementVNode(\"div\", _hoisted_17, [\n                                        _cache[13] || (_cache[13] = _createElementVNode(\"label\", { class: \"field-label\" }, \"种族\", -1 /* CACHED */)),\n                                        _withDirectives(_createElementVNode(\"input\", {\n                                            \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event) => ((_unref(form).race) = $event)),\n                                            class: \"field-input\",\n                                            type: \"text\",\n                                            placeholder: \"人类、精灵、兽人… 留空随机\",\n                                            disabled: _unref(isSubmitting)\n                                        }, null, 8 /* PROPS */, _hoisted_18), [\n                                            [_vModelText, _unref(form).race]\n                                        ])\n                                    ])\n                                ]),\n                                _createCommentVNode(\" 外貌 \"),\n                                _createElementVNode(\"div\", _hoisted_19, [\n                                    _cache[14] || (_cache[14] = _createElementVNode(\"label\", { class: \"field-label\" }, \"外貌\", -1 /* CACHED */)),\n                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event) => ((_unref(form).appearance) = $event)),\n                                        class: \"field-textarea\",\n                                        rows: \"3\",\n                                        placeholder: \"描述角色的外貌特征，留空随机生成\",\n                                        disabled: _unref(isSubmitting)\n                                    }, null, 8 /* PROPS */, _hoisted_20), [\n                                        [_vModelText, _unref(form).appearance]\n                                    ])\n                                ]),\n                                _createCommentVNode(\" 特质 \"),\n                                _createElementVNode(\"div\", _hoisted_21, [\n                                    _cache[15] || (_cache[15] = _createElementVNode(\"label\", { class: \"field-label\" }, \"特质\", -1 /* CACHED */)),\n                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event) => ((_unref(form).traits) = $event)),\n                                        class: \"field-textarea\",\n                                        rows: \"3\",\n                                        placeholder: \"性格、能力、习惯等特点，留空随机生成\",\n                                        disabled: _unref(isSubmitting)\n                                    }, null, 8 /* PROPS */, _hoisted_22), [\n                                        [_vModelText, _unref(form).traits]\n                                    ])\n                                ]),\n                                _createCommentVNode(\" 背景故事 \"),\n                                _createElementVNode(\"div\", _hoisted_23, [\n                                    _cache[16] || (_cache[16] = _createElementVNode(\"label\", { class: \"field-label\" }, [\n                                        _createTextVNode(\"背景故事 \"),\n                                        _createElementVNode(\"span\", { class: \"field-label--extra\" }, \"（额外设定补充）\")\n                                    ], -1 /* CACHED */)),\n                                    _withDirectives(_createElementVNode(\"textarea\", {\n                                        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event) => ((_unref(form).background) = $event)),\n                                        class: \"field-textarea\",\n                                        rows: \"4\",\n                                        placeholder: \"角色的来历、经历或额外设定，留空随机生成\",\n                                        disabled: _unref(isSubmitting)\n                                    }, null, 8 /* PROPS */, _hoisted_24), [\n                                        [_vModelText, _unref(form).background]\n                                    ])\n                                ])\n                            ]),\n                            _createCommentVNode(\" 人设库 \"),\n                            _createElementVNode(\"div\", _hoisted_25, [\n                                _createElementVNode(\"div\", _hoisted_26, [\n                                    _withDirectives(_createElementVNode(\"select\", {\n                                        \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event) => (_isRef(selectedPresetName) ? (selectedPresetName).value = $event : null)),\n                                        class: \"preset-select\",\n                                        disabled: _unref(isSubmitting)\n                                    }, [\n                                        _cache[17] || (_cache[17] = _createElementVNode(\"option\", { value: \"\" }, \"— 选择已保存设定 —\", -1 /* CACHED */)),\n                                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(presets), (p) => {\n                                            return (_openBlock(), _createElementBlock(\"option\", {\n                                                key: p.name,\n                                                value: p.name\n                                            }, _toDisplayString(p.name), 9 /* TEXT, PROPS */, _hoisted_28));\n                                        }), 128 /* KEYED_FRAGMENT */))\n                                    ], 8 /* PROPS */, _hoisted_27), [\n                                        [_vModelSelect, _unref(selectedPresetName)]\n                                    ]),\n                                    _createElementVNode(\"button\", {\n                                        class: \"preset-btn\",\n                                        disabled: _unref(isSubmitting) || !_unref(selectedPresetName),\n                                        onClick: loadPreset\n                                    }, \"载入\", 8 /* PROPS */, _hoisted_29),\n                                    _createElementVNode(\"button\", {\n                                        class: \"preset-btn preset-btn--danger\",\n                                        disabled: _unref(isSubmitting) || !_unref(selectedPresetName),\n                                        onClick: deletePreset\n                                    }, \"删除\", 8 /* PROPS */, _hoisted_30)\n                                ]),\n                                _createElementVNode(\"div\", _hoisted_31, [\n                                    _withDirectives(_createElementVNode(\"input\", {\n                                        \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event) => (_isRef(savePresetName) ? (savePresetName).value = $event : null)),\n                                        class: \"field-input\",\n                                        type: \"text\",\n                                        placeholder: \"输入设定名称…\",\n                                        disabled: _unref(isSubmitting)\n                                    }, null, 8 /* PROPS */, _hoisted_32), [\n                                        [_vModelText, _unref(savePresetName)]\n                                    ]),\n                                    _createElementVNode(\"button\", {\n                                        class: \"preset-btn preset-btn--save\",\n                                        disabled: _unref(isSubmitting) || !_unref(savePresetName).trim(),\n                                        onClick: savePreset\n                                    }, \"保存当前设定\", 8 /* PROPS */, _hoisted_33)\n                                ])\n                            ]),\n                            _createCommentVNode(\" 提交按钮 \"),\n                            _createElementVNode(\"div\", _hoisted_34, [\n                                _createElementVNode(\"button\", {\n                                    class: \"submit-btn\",\n                                    disabled: _unref(isSubmitting),\n                                    onClick: handleSubmit\n                                }, [\n                                    (_unref(isSubmitting))\n                                        ? (_openBlock(), _createElementBlock(\"span\", _hoisted_36, [...(_cache[18] || (_cache[18] = [\n                                                _createElementVNode(\"span\", { class: \"spinner\" }, \"⬡\", -1 /* CACHED */),\n                                                _createTextVNode(\" 生成中… \", -1 /* CACHED */)\n                                            ]))]))\n                                        : (_openBlock(), _createElementBlock(\"span\", _hoisted_37, \" ▶ 开始冒险 \"))\n                                ], 8 /* PROPS */, _hoisted_35)\n                            ])\n                        ])\n                    ], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */))\n            ]));\n        };\n    }\n});\n","/* unplugin-vue-components disabled */import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=3abecd67&lang=scss&scoped=true\"\n\nimport exportComponent from \"../../node_modules/.pnpm/vue-loader@17.4.2_vue@3.5.2_71d7740e7607e74f4d732110d38a3681/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-3abecd67\"]])\n\nexport default __exports__","import { createApp } from 'vue';\nimport App from './App.vue';\n$(() => {\n    const app = createApp(App).use(createPinia());\n    app.mount('#app');\n    $(window).on('pagehide', () => app.unmount());\n});\n"],"names":["exports","sfc","props","target","__vccOpts","key","val","__webpack_module_cache__","Vue","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","CHAT_VAR_KEY","PRESETS_STORAGE_KEY","__name","setup","__props","genderOptions","label","value","form","ref","name","gender","race","age","appearance","traits","background","isSubmitting","submitted","presets","selectedPresetName","savePresetName","savePreset","trim","idx","findIndex","p","entry","push","localStorage","setItem","JSON","stringify","loadPreset","preset","find","deletePreset","filter","onMounted","vars","getVariables","type","_","get","saved","raw","getItem","parse","summaryFields","computed","f","map","async","handleSubmit","lines","user_input","join","replaceVariables","starter_character_form","generate","err","console","error","_ctx","_cache","$event","placeholder","disabled","g","onClick","rows","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","$","app","createApp","App","use","mount","window","on","unmount"],"sourceRoot":""}